<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Crown Land Finder ‚Äì Ontario (CLUPA + WMU + Hunting)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link rel="stylesheet" href="styles.css" />
  
<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#0a7cff">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon" href="icon-192.png">
<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</head>
  <body>
    <div id="app">
      <aside id="sidebar">
        <header class="sidebar-header">
          <h1>Crown Land Finder</h1>
          <p class="subtitle">
            Live CLUPA General Use Areas with Wildlife Management Units and hunting info.
          </p>
        </header>

        <section class="panel">
          <h2>Layers</h2>
          <label class="checkbox-row">
            <input type="checkbox" id="gua-toggle" checked />
            <div>
              <div class="label-main">General Use Area (CLUPA)</div>
              <div class="label-sub">From Ontario LIO Open Data.</div>
            </div>
          </label>
          <label class="checkbox-row">
            <input type="checkbox" id="wmu-toggle" checked />
            <div>
              <div class="label-main">WMU Boundaries & Labels</div>
              <div class="label-sub">Wildlife Management Units overlay.</div>
            </div>
          </label>
        </section>

        <section class="panel">
          <h2>Search WMU</h2>
          <p class="panel-help">
            Enter a WMU code (e.g. <code>3</code>, <code>3A</code>, <code>47</code>) and press Go.
          </p>
          
<div class="search-row">
  <input id="wmu-search-input" type="text" placeholder="WMU ID" />
  <button id="wmu-locate-btn" class="btn btn-sm">Locate WMU</button>
  <button id="wmu-hunt-btn" class="btn btn-sm btn-secondary">Hunting Regulation</button>
</div>
          <p id="wmu-search-status" class="panel-help status-line"></p>
        </section>

        <section class="panel">
          <h2>Tools</h2>
          <button class="btn" id="locate-btn">üìç Locate me</button>
          <p class="panel-help">
            Centers the map on your approximate location (if your browser allows it).
          </p>
        </section>

        <section class="panel">
          <h2>Basemap</h2>
          <p class="panel-help">Switch between street and topo basemaps.</p>
          <div class="radio-group">
            <label class="radio-row">
              <input type="radio" name="basemap" value="osm" checked />
              <span>Street map (OSM)</span>
            </label>
            <label class="radio-row">
              <input type="radio" name="basemap" value="topo" />
              <span>Topo map (OpenTopoMap)</span>
            </label>
          </div>
        </section>

        <footer class="sidebar-footer">
          <small>
            Built from Ontario open services (LIO Open Data + WMU). Hunting seasons are a helper only;
            always confirm with the official regulations.
          </small>
        </footer>
      </aside>

      <main id="map-container">
        <div id="map"></div>
        <div id="map-loading" class="map-overlay hidden">Loading data‚Ä¶</div>
        <div id="map-error" class="map-overlay map-overlay-error hidden"></div>

        <!-- Floating hunting info button -->
        <button id="hunting-btn" class="floating-btn hidden">ü¶å Hunting</button>

        <!-- Modal for hunting seasons -->
        <div id="hunting-modal-backdrop" class="modal-backdrop hidden">
          <div id="hunting-modal" class="modal">
            <div class="modal-header">
              <h2 id="modal-title">Hunting seasons</h2>
              <button id="modal-close" class="modal-close" aria-label="Close">√ó</button>
            </div>
            <p id="modal-wmu" class="modal-wmu"></p>

            <div class="species-row">
              <button class="species-btn" data-species="deer">ü¶å Deer</button>
              <button class="species-btn" data-species="moose">ü´é Moose</button>
              <button class="species-btn" data-species="bear">üêª Bear</button>
              <button class="species-btn" data-species="wolf">üê∫ Wolf / Coyote</button>
              <button class="species-btn" data-species="small_game">üêá Small game</button>
            </div>

            <div id="modal-content" class="modal-content">
              <p class="panel-help">
                Choose a species to see seasons for this WMU.
              </p>
            </div>

            <p class="modal-note">
              This summary is for convenience only. It may be incomplete or simplified. Always check the
              official Ontario Hunting Regulations for full legal details and any updates.
            </p>
          </div>
        </div>
      </main>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/esri-leaflet@3.0.11/dist/esri-leaflet.js"></script>
    <script src="app.js"></script>
  </body>
</html>
